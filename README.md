# Image processing assignment 1

Source code for first assignment in Image processing course at Polytech Paris-Saclay engineering school.

It replaces fragments of the famous fresco *[The Creation of Adam](https://en.wikipedia.org/wiki/The_Creation_of_Adam)* by Michelangelo, using a ready-made solution, to introduce OpenCV library.

This file contains instructions for using it (report extract).

## Prerequisites

- Python 3

## File tree

```sh
img-prc-assignment1
├──frag_eroded # contains fragment images
├──(solutions) # folder generated by solution_generator script containing different solutions
├──src
│   ├───ex1.py # Exercise 1
│   ├───ex2.py # Exercise 2
│   ├───solution_generator.py # Generates different solutions for exercise 2
│   └───utils.py # Common functions
├───fragments.txt # right solution
├───fragments_s.txt # wrong fragments numbers
├───Michelangelo_ThecreationofAdam_1707x775.jpg # Full fresco (used for total size and fragments background for exercise 1)
└───tp1.pdf # assignment document
```

## Installation

1. Clone the project first

```sh
git clone https://github.com/furtivesock/img-prc-assignment1.git
```

2. As images are not included in the repository, you need to download the following files and put them in the project root :
  - [Fragments images folder `frag_eroded`](http://hebergement.u-psud.fr/emi/TIPolytech/TP1/frag_eroded.zip) (unzip it)
  - [Full fresco `Michelangelo_ThecreationofAdam_1707x775.jpg`](http://hebergement.u-psud.fr/emi/TIPolytech/TP1/Michelangelo_ThecreationofAdam_1707x775.jpg)

You can see the organization needed [above](#file-tree).

## Exercise 1

> The goal of this exercise is to replace fragments on the fresco.

1. Move to the `src/` directory

```sh
cd img-prc-assignment1/src/
```

2. Run the script

```sh
python3 ex1.py
```

If you are on a Unix-like operating system, you can also make it executable :

```sh
chmod +x ex1.py
./ex1.py
```
            
After a few seconds of processing, the final image should appear.

## Exercise 2

> The goal of this exercise is to compute solution precision in comparison with the right solution (seen in the previous exercise). 

1. Move to the `src/` directory

```sh
cd img-prc-assignment1/src/
```

2. Generate the different solutions

```sh
python3 solution_generator.py
ls ../solutions # to see the solutions content
```

3. If you don't want to use our generated solutions but your own solution text files, you need to provide them in a `solutions/` folder (see [file tree](#file-tree)). 

The `ex2.py` loads all solutions in this folder.

The format required is the same as `fragments_s.txt`. For each fragment to place on the fresco, follow this row format :

```
[fragment number] [x (int)] [y (int)] [deg (double)]
```

Each row must be separated by a line break.

4. Run the script

```sh
python3 ex2.py 
```

or

```
chmod +x ex2.py
./ex2.py
```

By default, the parameters used are $\Delta x = 4$ px, $\Delta y = 4$ px and $\Delta \alpha = 4°$ .
But you can set your own parameters if you want :

```sh
python3 ex2.py [dx (px, int)] [dy (px, int)] [dalpha (deg, double)]
# or
./ex2.py [dx (px, int)] [dy (px, int)] [dalpha (deg, double)]
```

Example :

```sh
python3 ex2.py 3 3 4
```